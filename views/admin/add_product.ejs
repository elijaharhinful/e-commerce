<!DOCTYPE html>
<html>
<%- include('../partials/adminhead'); %>

<body class="main-layout">
    <%- include('../layouts/adminheader') %>
    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Add a Product</h4>
                        <div class="breadcrumb__links">
                            <a href="/admin/products">Products</a>
                            <span>Add a product</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->
    <br>
    <br>
    
    <section>
        <div class="container">
            
            <div class="contact__form">
                <a href="/admin/products" class="btn btn-primary">Back to all products</a>
            <br><br>
                <h2>Add New Product</h2>
                <br>
                <form method="post" action="/admin/products/add-product" enctype="multipart/form-data">
    
                    <div class="form-group">
                        <label for="">Title</label>
                        <input type="text" class="form-control" name="title" value="<%= title %>" placeholder="Title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="">Description</label>
                        <textarea name="desc" class="form-control" cols="30" rows="10" placeholder="Description"><%= desc %></textarea required>
                    </div>
                    
                    <div class="form-group">
                        <label for="">Category</label>
                        <br>
                        <select name="category" class="form-control">
                            <% categories.forEach(function(cat){ %>
                                <option value="<%= cat.slug %>"><%= cat.title %></option>
                            <% }); %>
                        </select>
                    </div>
                    <br>
                    <br>
                    <div class="form-group">
                        <label for="">Price</label>
                        <input type="text" class="form-control" name="price" value="<%= price %>" placeholder="Price" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="">Image</label>
                        <input type="file" class="form-control" name="image" id="img" required>
                        <img src="#" id="imgPreview" alt="">
                    </div>
                    
                    <button class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </section>
    <br>
    <br>

    <%- include('../layouts/adminfooter') %>
    <script>
    
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                
                reader.onload = function(e) {
                    $("#imgPreview").attr('src', e.target.result).width(100).height(100);
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        $("#img").change(function() {
            readURL(this);
        });
        
    </script>
</body>

</html>