<!DOCTYPE html>
<html>
<%- include('partials/head'); %>

<body class="main-layout">
    <%- include('layouts/header'); %>
    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Shop</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->
    
    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="shop__sidebar">
                        <div class="shop__sidebar__accordion">
                            <div class="accordion" id="accordionExample">
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                    </div>
                                    <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__categories">
                                                <ul class="nice-scroll">
                                                    <% categories.forEach(function(c){ %>
                                                        <li><a href="/products/<%= c.slug %>"><%= c.title %></a></li>
                                                    <% }); %>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="row">
                        <% products.forEach(function(p){ %>
                        <div class="col-lg-4 col-md-6 col-sm-6">
                            <div class="product__item">
                                <div class="product__item__pic set-bg" data-setbg="/product_images/<%= p.id %>/<%= p.image %>">
                                    <ul class="product__hover">
                                        <li><a href="#"><img src="img/icon/heart.png" alt=""></a></li>
                                        <li><a class="vd" href="/products/<%= p.category %>/<%= p.slug %>"><img src="img/icon/compare.png" alt=""> <span>View Details</span></a>
                                        </li>
                                        <li><a href="#"><img src="img/icon/search.png" alt=""></a></li>
                                    </ul>
                                </div>
                                <div class="product__item__text">
                                    <h6><%= p.title.toUpperCase() %></h6>
                                    <a href="/cart/add/<%= p.slug %>" class="add-cart">+ Add To Cart</a>
                                    <h5>â‚µ<%= parseFloat(p.price).toFixed(2) %></h5>
                                </div>
                                <div class="product__item">
                                    <a class="vd primary-btn" href="/products/<%= p.category %>/<%= p.slug %>">View Details</a>
                                </div>
                            </div>
                        </div>
                        <% }); %>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="product__pagination">
                                <% if (pagesNeeded > 0){ %>
                                    <% if(pageNumber == 1){ %> 
                                        <a class="disabled first" href="?page=<%= pageNumber; %>"> First </a>
                                    <%}else{ %> 
                                        <a class="last" href="?page=<%= pageNumber; %>"> First </a>
                                    <%} %>
                                    <% let i = (Number(pageNumber) > 5 ? Number(pageNumber) - 4 : 1) %>
                                    <% if (i !==1){ %>
                                        <a href="#">...</a>
                                    <%}%>
                                    <% for (; i <= (Number(pageNumber) + 4) && i <= pagesNeeded; i++){ %> 
                                        <% if (i == pageNumber){ %> 
                                            <a class="active" href="?page=<%= i; %>"> <%= i %></a>
                                        <%}else {%> 
                                            <a href="?page=<%= i; %>"> <%= i %></a>
                                        <%}%>
                                        <% if( i == Number(pageNumber) + 4 & i < pages){ %> 
                                            <a class="disabled" href="#">...</a>   
                                        <%} %>
                                    <%}%>
                                    <% if (pageNumber == pagesNeeded){ %> 
                                        <a class="disabled last" href="?page=<%= pagesNeeded; %>"> Last</a>
                                        <%} else{ %>
                                            <a class="last" href="?page=<%= pagesNeeded; %>"> Last</a>
                                            <% }%>
                                <%} %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Shop Section End -->

    <%- include('layouts/footer'); %>
</body>

</html>
